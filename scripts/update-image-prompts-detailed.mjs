import { ConvexHttpClient } from "convex/browser";

const convexUrl = "https://brazen-anteater-770.convex.cloud";
const client = new ConvexHttpClient(convexUrl);

// より詳細な画像生成プロンプト10個
const detailedImagePrompts = [
  {
    title: "夕暮れの未来都市",
    content: "夕焼けのオレンジとピンク色のグラデーションに染まる超高層ビル群が立ち並ぶ未来都市。建物の表面はホログラムディスプレイで覆われ、ネオンサインが輝いている。空中には透明なチューブ状の高速道路が幾重にも張り巡らされ、流線型の空飛ぶ車が光の軌跡を残しながら飛び交っている。ビルの谷間には蒸気が立ち込め、サイバーパンクな雰囲気を醸し出している。地上には雨に濡れた路面が虹色に輝き、歩道を歩く人々のシルエットが逆光で浮かび上がる。8K超高画質、レイトレーシング、シネマティックライティング、詳細なディテール描写、SF映画のような壮大な構図で描く。"
  },
  {
    title: "魔法の図書館",
    content: "天井まで果てしなく続く巨大な本棚に囲まれた幻想的な魔法図書館の内部。古びた革装丁の魔導書が宙に浮遊し、ページが自動的にめくれている。金色と紫色の魔法の光の粒子が空中を舞い、本棚の間を照らしている。螺旋階段が幾重にも重なり、アーチ型の窓からは月明かりが差し込む。中央には巨大な水晶の球体が浮かび、その周りを星座のような光の模様が回転している。暖炉の炎が暖かい光を放ち、木製の読書机には羽ペンとインク壺が置かれている。ファンタジックで神秘的な雰囲気、柔らかいライティング、ゴシック建築様式、細密な装飾、映画のような奥行きのある構図。"
  },
  {
    title: "桜と和風建築",
    content: "満開の桜の木々に囲まれた古い日本寺院の美しい風景。朝霧が立ち込める静かな春の早朝、柔らかい朝日が桜の花びらを桃色とピンク色に照らし出している。伝統的な木造建築の寺院は朱色の柱と白い壁、瓦屋根で構成され、精緻な彫刻が施されている。石畳の参道には散った桜の花びらが敷き詰められ、石灯籠が静かに佇んでいる。手入れされた日本庭園には緑の苔と小川が流れ、木製の橋が架かっている。遠景には霞んだ山々が見える。日本の伝統美、侘び寂びの美学、水彩画のような柔らかいタッチ、春の穏やかな雰囲気、黄金比を用いた完璧な構図、超高精細な描写。"
  },
  {
    title: "宇宙ステーション内部",
    content: "広大な宇宙空間に浮かぶ最先端技術の宇宙ステーション内部のコマンドルーム。壁一面に配置された未来的なホログラムディスプレイには、地球の軌道データ、星図、システムステータスが表示されている。青と白の冷たいLED照明が施設内を照らし、金属とガラスで構成された近未来的なインテリア。宇宙飛行士たちが白とオレンジ色の宇宙服を着て作業している。巨大な円形の窓からは青く美しい地球が見え、その向こうに太陽の光が輝いている。無重力空間では小さな物体が浮遊し、タッチパネル式のコントロールパネルが宙に浮いている。リアルなSF、ハードサイエンスフィクション、映画品質のライティング、8K解像度、広角レンズの壮大な視野、NASA写真のようなリアリズム。"
  },
  {
    title: "水彩画風の自然",
    content: "静かな森の中を流れる清流と苔むした岩、木漏れ日が差し込む幻想的な自然風景。透明度の高い小川の水面に木々の緑が映り込み、水の流れが柔らかく描かれている。森の木々は様々な緑色のグラデーションで表現され、葉の隙間から差し込む朝の光が霧のように柔らかく空気中に拡散している。川辺には野花が咲き、蝶々が優雅に舞っている。岩の表面には鮮やかな緑の苔が生え、シダ植物が繊細に描かれている。全体を水彩画のタッチで表現し、色と色が溶け合うように滲んだ柔らかい境界線、パステルカラーの優しい色調、癒しと安らぎを感じさせる穏やかな雰囲気、絵本のような温かみのあるイラストスタイル。"
  },
  {
    title: "スチームパンクカフェ",
    content: "19世紀ヴィクトリア朝時代の建築様式と蒸気機関の技術が融合した、レトロフューチャーなスチームパンクカフェの内部。真鍮製の巨大な歯車が壁面で回転し、銅製のパイプが天井を這い、時折蒸気を噴き出している。アンティークな木製家具、革張りのソファ、ガス灯のような暖かいオレンジ色の照明が空間を包み込む。カウンターにはエスプレッソマシンを模した蒸気機関装置があり、複雑な機構が目に見える形で動いている。壁には古い時計、望遠鏡、機械式計器が装飾として飾られている。窓からは霧のかかった街並みが見え、飛行船が空を飛んでいる。細密な装飾、アンティーク調の色調、暖色系の柔らかいライティング、職人技を感じさせる精緻なディテール。"
  },
  {
    title: "海底都市",
    content: "深海の暗闇の中に輝く巨大な透明ドームに覆われた未来の海底都市。ドームの内部には高層ビルや住宅が建ち並び、人工の太陽光照明が都市を明るく照らしている。ドームの外側では、色とりどりの熱帯魚の群れが泳ぎ、巨大なマンタやクジラが優雅に通り過ぎる。海底都市と外界を繋ぐ透明なチューブ状のトンネルを、潜水艇が行き来している。都市の基部には発光するサンゴ礁が育ち、バイオルミネセンス（生物発光）の生物が幻想的な青と緑の光を放っている。海中には気泡が浮かび上がり、海藻が揺れている。深海の神秘的な雰囲気、青と緑のグラデーション、光と影のコントラスト、SF的でありながら美しい海洋生物との共生、8K超高解像度。"
  },
  {
    title: "秋の田舎道",
    content: "収穫期を迎えた黄金色の稲穂が一面に広がる日本の田園風景。夕暮れ時の斜めから差し込む暖かいオレンジ色の夕日が稲穂を照らし、黄金の海のように輝いている。あぜ道には彼岸花が赤く咲き誇り、遠くには茅葺き屋根の古民家と柿の木が見える。空には秋の雲がかかり、渡り鳥の群れがV字編隊を組んで飛んでいる。近景には古い木製の案山子が立ち、その周りをトンボが飛び交っている。遠景には連なる山々がシルエットとなって見える。ノスタルジックで懐かしい雰囲気、日本の原風景、写実的な描写、暖色系の美しいグラデーション、映画のような感動的な構図、高精細な4K画質。"
  },
  {
    title: "ドラゴンと騎士",
    content: "中世ヨーロッパの古城を背景に、巨大な赤いドラゴンと銀色の鎧を着た騎士が対峙する壮大な戦いのシーン。ドラゴンは翼を大きく広げ、口から炎のブレスを吐き出し、その熱波で空気が歪んでいる。全身を覆う鱗は一枚一枚が細かく描かれ、角と牙が鋭く光っている。騎士は紋章の入った盾を構え、炎を反射させながら聖剣を振りかざしている。マントが風になびき、鎧には戦いの傷跡が刻まれている。周囲には岩が砕け散り、炎の破片が飛び散っている。劇的な稲妻が空を裂き、暗雲が立ち込める。ダイナミックで迫力のある構図、映画のような劇的なライティング、ハイファンタジー、エピック（叙事詩的）な雰囲気、超高精細なテクスチャ、英雄的で勇壮な物語性。"
  },
  {
    title: "雨の街角",
    content: "夜の大都会、雨に濡れた路面に色とりどりのネオンサインが反射して虹色に輝く幻想的な街角の風景。カラフルな傘をさした人々が雑踏の中を行き交い、その影が雨の路面に映り込んでいる。高層ビルの看板やネオンライトが雨粒に反射し、赤、青、緑、黄色の光が混ざり合っている。霧雨が街灯の光に照らされ、空中で光の粒子のように輝いている。路面電車のライトが遠くに見え、車のテールランプが光の軌跡を描いている。店のショーウィンドウからは暖かいオレンジ色の光が漏れている。映画のワンシーンのようなシネマティックな構図、ムーディーで都会的な雰囲気、光と影のコントラスト、雨の質感、ネオンの色彩、ブレードランナー風のサイバーパンク要素、4K高画質。"
  }
];

async function main() {
  console.log("=== 画像生成プロンプトを詳細版に更新 ===");
  console.log("Convex URL:", convexUrl);

  try {
    const userId = "k17f6nme4kdsjk6jyd0awdjh057txpfe"; // ReiのユーザーID

    // 既存のReiのプロンプトを取得
    console.log("\n既存のプロンプトを取得中...");
    const sharedItems = await client.query("promptItems:getSharedItems", { userId });
    const reiPrompts = sharedItems.filter(item => item.createdByName === "Rei");

    console.log(`${reiPrompts.length}件のReiのプロンプトが見つかりました`);

    // タイトルでマッチングして更新
    let updatedCount = 0;
    for (const detailedPrompt of detailedImagePrompts) {
      const existingPrompt = reiPrompts.find(item => item.title === detailedPrompt.title);

      if (existingPrompt) {
        console.log(`\n更新中: ${detailedPrompt.title}`);
        console.log(`文字数: ${detailedPrompt.content.length}文字`);

        await client.mutation("promptItems:update", {
          id: existingPrompt._id,
          title: detailedPrompt.title,
          content: detailedPrompt.content,
          isShared: true,
          userId
        });

        console.log(`✅ 更新成功`);
        updatedCount++;
      } else {
        console.log(`⚠️  "${detailedPrompt.title}" が見つかりませんでした`);
      }
    }

    console.log(`\n=== 更新完了！ ${updatedCount}件のプロンプトを更新しました ===`);

  } catch (error) {
    console.error("\n❌ エラーが発生しました:", error);
    process.exit(1);
  }
}

main();
